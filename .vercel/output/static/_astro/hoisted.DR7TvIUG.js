function y(a,c,t){const d=document.getElementById(a.toLowerCase()+"Value"),g=document.getElementById(a.toLowerCase()+"Rating");d&&g&&(d.textContent=Math.round(c),g.textContent=t,g.className=t)}const b=sendToAnalytics;sendToAnalytics=function(a,c,t){b(a,c,t),y(a,c,t)};const h="modulepreload",E=function(a){return"/"+a},m={},T=function(c,t,d){let g=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),o=e?.nonce||e?.getAttribute("nonce");g=Promise.allSettled(t.map(s=>{if(s=E(s),s in m)return;m[s]=!0;const i=s.endsWith(".css"),n=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":h,i||(l.as="script"),l.crossOrigin="",l.href=s,o&&l.setAttribute("nonce",o),document.head.appendChild(l),i)return new Promise((p,v)=>{l.addEventListener("load",p),l.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${s}`)))})}))}function r(e){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=e,window.dispatchEvent(o),!o.defaultPrevented)throw e}return g.then(e=>{for(const o of e||[])o.status==="rejected"&&r(o.reason);return c().catch(r)})};function f(){T(async()=>{const{getCLS:a,getFID:c,getFCP:t,getLCP:d,getTTFB:g}=await import("https://unpkg.com/web-vitals@3/dist/web-vitals.umd.js");return{getCLS:a,getFID:c,getFCP:t,getLCP:d,getTTFB:g}},[]).then(({getCLS:a,getFID:c,getFCP:t,getLCP:d,getTTFB:g})=>{d(r=>{console.log("LCP:",r),u("LCP",r.value,r.rating)}),c(r=>{console.log("FID:",r),u("FID",r.value,r.rating)}),a(r=>{console.log("CLS:",r),u("CLS",r.value,r.rating)}),t(r=>{console.log("FCP:",r),u("FCP",r.value,r.rating)}),g(r=>{console.log("TTFB:",r),u("TTFB",r.value,r.rating)})}),w(),C()}function u(a,c,t){typeof gtag<"u"&&gtag("event","web_vitals",{metric_name:a,metric_value:Math.round(c),metric_rating:t,event_category:"Performance"}),fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metric:a,value:c,rating:t,timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent})}).catch(d=>console.log("Analytics error:",d))}function w(){const a=document.querySelectorAll("img");let c=0;const t=a.length,d=performance.now();a.forEach((g,r)=>{const e=performance.now();g.addEventListener("load",()=>{const o=performance.now()-e;if(c++,o>1e3&&console.warn(`Slow image: ${g.src} took ${o.toFixed(2)}ms`),c===t){const s=performance.now()-d;console.log(`All images loaded in ${s.toFixed(2)}ms`),u("IMAGE_LOAD_TIME",s,s<2e3?"good":"needs-improvement")}}),g.addEventListener("error",()=>{console.error(`Failed to load image: ${g.src}`),u("IMAGE_ERROR",1,"poor")})})}function C(){new PerformanceObserver(c=>{c.getEntries().forEach(t=>{if(t.entryType==="resource"){const d=t.responseEnd-t.startTime;d>2e3&&console.warn(`Slow resource: ${t.name} took ${d.toFixed(2)}ms`),t.name.includes(".webp")&&u("WEBP_LOAD_TIME",d,d<1e3?"good":"needs-improvement")}})}).observe({entryTypes:["resource"]})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f):f();function P(){if(window.innerWidth>1024)return;function a(){try{new PerformanceObserver(o=>{const s=o.getEntries(),n=s[s.length-1].startTime,l=n<=2500?"good":n<=4e3?"needs-improvement":"poor";console.log(`Mobile LCP: ${n.toFixed(2)}ms (${l})`),typeof gtag<"u"&&gtag("event","mobile_lcp",{event_category:"Core Web Vitals",event_label:l,value:Math.round(n)})}).observe({entryTypes:["largest-contentful-paint"]})}catch(e){console.warn("LCP monitoring not supported:",e)}}function c(){try{new PerformanceObserver(o=>{o.getEntries().forEach(i=>{const n=i.processingStart-i.startTime,l=n<=100?"good":n<=300?"needs-improvement":"poor";console.log(`Mobile FID: ${n.toFixed(2)}ms (${l})`),typeof gtag<"u"&&gtag("event","mobile_fid",{event_category:"Core Web Vitals",event_label:l,value:Math.round(n)})})}).observe({entryTypes:["first-input"]})}catch(e){console.warn("FID monitoring not supported:",e)}}function t(){try{let e=0;new PerformanceObserver(s=>{s.getEntries().forEach(l=>{l.hadRecentInput||(e+=l.value)});const n=e<=.1?"good":e<=.25?"needs-improvement":"poor";console.log(`Mobile CLS: ${e.toFixed(4)} (${n})`),typeof gtag<"u"&&gtag("event","mobile_cls",{event_category:"Core Web Vitals",event_label:n,value:Math.round(e*1e3)})}).observe({entryTypes:["layout-shift"]})}catch(e){console.warn("CLS monitoring not supported:",e)}}function d(){try{new PerformanceObserver(o=>{o.getEntries().forEach(i=>{const n=i.startTime,l=n<=1800?"good":n<=3e3?"needs-improvement":"poor";console.log(`Mobile FCP: ${n.toFixed(2)}ms (${l})`),typeof gtag<"u"&&gtag("event","mobile_fcp",{event_category:"Core Web Vitals",event_label:l,value:Math.round(n)})})}).observe({entryTypes:["paint"]})}catch(e){console.warn("FCP monitoring not supported:",e)}}function g(){try{const e=performance.getEntriesByType("navigation")[0];if(e){const o=e.responseStart-e.requestStart,s=o<=800?"good":o<=1800?"needs-improvement":"poor";console.log(`Mobile TTFB: ${o.toFixed(2)}ms (${s})`),typeof gtag<"u"&&gtag("event","mobile_ttfb",{event_category:"Core Web Vitals",event_label:s,value:Math.round(o)})}}catch(e){console.warn("TTFB monitoring not supported:",e)}}function r(){["/src/styles/mobile-optimization.css","/images/logo/browns-painting-logo-hat.png"].forEach(i=>{const n=document.createElement("link");n.rel="preload",n.href=i,n.as=i.endsWith(".css")?"style":"image",document.head.appendChild(n)}),document.querySelectorAll("img").forEach(i=>{i.hasAttribute("loading")||i.setAttribute("loading","lazy"),i.hasAttribute("decoding")||i.setAttribute("decoding","async")}),document.querySelectorAll("a, button, input, select, textarea").forEach(i=>{const n=i.getBoundingClientRect();(n.width<44||n.height<44)&&(i.style.minWidth="44px",i.style.minHeight="44px")})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{a(),c(),t(),d(),g(),r()}):(a(),c(),t(),d(),g(),r()),window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];if(e){const o=e.loadEventEnd-e.loadEventStart,s=e.domContentLoadedEventEnd-e.domContentLoadedEventStart;console.log("Mobile Performance Summary:"),console.log(`- Load Time: ${o.toFixed(2)}ms`),console.log(`- DOM Content Loaded: ${s.toFixed(2)}ms`),console.log(`- Connection Type: ${navigator.connection?.effectiveType||"unknown"}`),console.log(`- Device Memory: ${navigator.deviceMemory||"unknown"}GB`)}},1e3)})}P();
